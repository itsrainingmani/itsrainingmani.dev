---
import { getCollection } from "astro:content";
import FormattedDate from "@/components/FormattedDate";
import BaseLayout from "@/layouts/BaseLayout";
import BlogTable from "@/components/BlogTable";

const pageTitle = "Learning Clojure in Public";

const posts = (
	await getCollection("clojurefam", ({ data }) => {
		return data.publish === true;
	})
).sort((a, b) => a.data.publishDate.valueOf() - b.data.publishDate.valueOf());
---

<BaseLayout>
	<main>
		<h1 class="text-right text-4xl">{pageTitle}</h1>
		<section>
			<BlogTable>
				{
					posts.map((post) => (
						<tr>
							<td>
								<a href={`/blog/clojurefam/${post.slug}/`}>
									<h4 class="title">{post.data.title}</h4>
								</a>
							</td>
							<td>
								<FormattedDate date={post.data.publishDate} />
							</td>
						</tr>
					))
				}
			</BlogTable>
		</section>
	</main>
</BaseLayout>
